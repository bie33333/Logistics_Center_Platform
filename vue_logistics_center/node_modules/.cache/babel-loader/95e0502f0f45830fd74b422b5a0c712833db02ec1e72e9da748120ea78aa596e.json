{"ast":null,"code":"import { selectAllGood } from \"@/api/good\";\nexport default {\n  data() {\n    return {\n      visible: false,\n      memberInfo: {},\n      goodData: [],\n      page: {\n        index: 1,\n        size: 4,\n        total: 0\n      },\n      exchange: {\n        memberId: \"\",\n        name: '',\n        totalIntegral: 0,\n        number: 0\n      }\n    };\n  },\n  created() {\n    this.getGoodData();\n  },\n  methods: {\n    confirm() {\n      this.visible = false;\n      this.$emit('ExchangeDialogConfirm', this.exchange);\n    },\n    show(memberInfo) {\n      this.memberInfo = memberInfo;\n      this.exchange.memberId = memberInfo.memberId;\n      this.visible = true;\n    },\n    getGoodData() {\n      selectAllGood({\n        \"pageIndex\": this.page.index,\n        \"pageSize\": this.page.size\n      }).then(res => {\n        this.goodData = res.data.list;\n        this.page.total = res.data.pageTotal;\n      });\n    },\n    handlePageChange(val) {\n      this.page.index = val;\n      this.getGoodData();\n    },\n    chooseGood(val) {\n      let good = val;\n      this.exchange.name = good.name;\n      if (this.exchange.number === 0) {\n        this.exchange.number = 1;\n      }\n      this.exchange.totalIntegral = good.integral * this.exchange.number;\n    }\n    // inputNumber() {\n    //     this.consume.totalPrice = movie.price * this.consume.number;\n    //     this.consume.totalIntegral = movie.integral * this.consume.number;\n    // }\n  }\n};","map":{"version":3,"names":["selectAllGood","data","visible","memberInfo","goodData","page","index","size","total","exchange","memberId","name","totalIntegral","number","created","getGoodData","methods","confirm","$emit","show","then","res","list","pageTotal","handlePageChange","val","chooseGood","good","integral"],"sources":["src/components/page/member/ExchangeDialog.vue"],"sourcesContent":["<template>\r\n    <el-dialog title=\"消费\" :visible.sync=\"visible\" width=\"70%\">\r\n        <el-table border :data=\"goodData\" @current-change=\"chooseGood\">\r\n            <el-table-column prop=\"name\" label=\"商品名\"></el-table-column>\r\n            <el-table-column prop=\"stock\" label=\"剩余\"></el-table-column>\r\n            <el-table-column prop=\"integral\" label=\"积分\"></el-table-column>\r\n        </el-table>\r\n        <el-pagination class=\"pagination\" background layout=\"total, prev, pager, next\"\r\n            :current-page=\"page.index\" :page-size=\"page.size\" :total=\"page.total\"\r\n            @current-change=\"handlePageChange\">\r\n        </el-pagination>\r\n        <el-form label-width=\"70px\" size=\"mini\">\r\n            <el-form-item label=\"商品名\"> {{exchange.name}} </el-form-item>\r\n            <el-form-item label=\"数量\"> <el-input v-model=\"exchange.number\" @change=\"inputNumber\"></el-input></el-form-item>\r\n            <el-form-item label=\"总积分\"> {{exchange.totalIntegral}} </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"visible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { selectAllGood } from \"@/api/good\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            visible: false,\r\n            memberInfo: {},\r\n            goodData: [],\r\n            page: {\r\n                index: 1,\r\n                size: 4,\r\n                total: 0,\r\n            },\r\n            exchange: {\r\n                memberId: \"\",\r\n                name: '',\r\n                totalIntegral: 0,\r\n                number: 0,\r\n            },\r\n        }\r\n    },\r\n    created() {\r\n        this.getGoodData();\r\n    },\r\n    methods: {\r\n        confirm() {\r\n            this.visible = false;\r\n            this.$emit('ExchangeDialogConfirm',this.exchange);\r\n        },\r\n        show(memberInfo) {\r\n            this.memberInfo = memberInfo;\r\n            this.exchange.memberId = memberInfo.memberId;\r\n            this.visible = true;\r\n        },\r\n        getGoodData() {\r\n            selectAllGood({\r\n                \"pageIndex\" : this.page.index,\r\n                \"pageSize\" : this.page.size\r\n            }).then(res => {\r\n                this.goodData = res.data.list;\r\n                this.page.total = res.data.pageTotal;\r\n            })\r\n        },\r\n        handlePageChange(val) {\r\n            this.page.index = val;\r\n            this.getGoodData();\r\n        },\r\n        chooseGood(val) {\r\n            let good = val;\r\n            this.exchange.name = good.name;\r\n            if (this.exchange.number === 0) {\r\n                this.exchange.number = 1;\r\n            }\r\n            this.exchange.totalIntegral = good.integral * this.exchange.number;\r\n        },\r\n        // inputNumber() {\r\n        //     this.consume.totalPrice = movie.price * this.consume.number;\r\n        //     this.consume.totalIntegral = movie.integral * this.consume.number;\r\n        // }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAwBA,SAAAA,aAAA;AACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,UAAA;MACAC,QAAA;MACAC,IAAA;QACAC,KAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,QAAA;QACAC,QAAA;QACAC,IAAA;QACAC,aAAA;QACAC,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAf,OAAA;MACA,KAAAgB,KAAA,+BAAAT,QAAA;IACA;IACAU,KAAAhB,UAAA;MACA,KAAAA,UAAA,GAAAA,UAAA;MACA,KAAAM,QAAA,CAAAC,QAAA,GAAAP,UAAA,CAAAO,QAAA;MACA,KAAAR,OAAA;IACA;IACAa,YAAA;MACAf,aAAA;QACA,kBAAAK,IAAA,CAAAC,KAAA;QACA,iBAAAD,IAAA,CAAAE;MACA,GAAAa,IAAA,CAAAC,GAAA;QACA,KAAAjB,QAAA,GAAAiB,GAAA,CAAApB,IAAA,CAAAqB,IAAA;QACA,KAAAjB,IAAA,CAAAG,KAAA,GAAAa,GAAA,CAAApB,IAAA,CAAAsB,SAAA;MACA;IACA;IACAC,iBAAAC,GAAA;MACA,KAAApB,IAAA,CAAAC,KAAA,GAAAmB,GAAA;MACA,KAAAV,WAAA;IACA;IACAW,WAAAD,GAAA;MACA,IAAAE,IAAA,GAAAF,GAAA;MACA,KAAAhB,QAAA,CAAAE,IAAA,GAAAgB,IAAA,CAAAhB,IAAA;MACA,SAAAF,QAAA,CAAAI,MAAA;QACA,KAAAJ,QAAA,CAAAI,MAAA;MACA;MACA,KAAAJ,QAAA,CAAAG,aAAA,GAAAe,IAAA,CAAAC,QAAA,QAAAnB,QAAA,CAAAI,MAAA;IACA;IACA;IACA;IACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}