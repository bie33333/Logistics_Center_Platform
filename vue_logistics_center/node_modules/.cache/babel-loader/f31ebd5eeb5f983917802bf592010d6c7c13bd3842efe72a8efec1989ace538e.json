{"ast":null,"code":"import { userLogin } from \"@/js/login\";\nexport default {\n  data() {\n    return {\n      param: {\n        role: '',\n        id: '',\n        password: ''\n      },\n      rules: {\n        managerId: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      },\n      dialogVisible: false,\n      addDialogVisible: false,\n      form: {\n        userName: '',\n        userPassword: '',\n        confirmedPassword: '',\n        userAccount: '',\n        userPhone: '',\n        userAge: '',\n        userSex: '',\n        userAddress: ''\n      },\n      rules: {\n        userName: [{\n          required: true,\n          message: '请输入用户姓名',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 10,\n          message: '长度在2至10个字符之间',\n          trigger: 'blur'\n        }],\n        userPassword: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 10,\n          message: '长度在6至15个字符之间',\n          trigger: 'blur'\n        }],\n        confirmedPassword: [{\n          validator: validatePass2,\n          trigger: 'blur'\n        }],\n        userAccount: [{\n          required: true,\n          message: '请输入账户',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 10,\n          message: '长度在3至10个字符之间',\n          trigger: 'blur'\n        }, {\n          validator: checkDuplicate,\n          trigger: 'blur'\n        }],\n        userPhone: [{\n          required: true,\n          message: '请输入电话',\n          trigger: 'blur'\n        }, {\n          min: 11,\n          max: 11,\n          message: '长度为11位',\n          trigger: 'blur'\n        }],\n        userAge: [{\n          required: true,\n          message: '请输入年龄',\n          trigger: 'blur'\n        }],\n        userSex: [{\n          required: true,\n          message: '请选择性别',\n          trigger: 'change'\n        }],\n        userAddress: [{\n          required: true,\n          message: '请输入住址',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm() {\n      if (this.param.role == \"manager\") {\n        this.handleManagerLogin();\n      } else if (this.param.role == \"user\") {\n        this.handleUserLogin();\n      } else {\n        this.$message('请选择角色');\n      }\n    },\n    handleManagerLogin() {\n      managerLogin(this.param).then(res => {\n        if (res.status == 200) {\n          if (res.data) {\n            this.$message.success('登录成功');\n            localStorage.setItem('managerId', this.param.id);\n            // this.$router.push('/index/dashboard');\n          } else {\n            this.$message.error('登录失败');\n          }\n        } else {\n          this.$message.error('服务器错误');\n        }\n      });\n    },\n    handleUserLogin() {\n      memberLogin(this.param).then(res => {\n        if (res.status == 200) {\n          if (res.data) {\n            this.$message.success('登录成功');\n            localStorage.setItem('memberId', this.param.id);\n            // this.$router.push('/memberView');\n          } else {\n            this.$message.error('登录失败');\n          }\n        } else {\n          this.$message.error('服务器错误');\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.form.resetFields();\n    }\n  }\n};","map":{"version":3,"names":["userLogin","data","param","role","id","password","rules","managerId","required","message","trigger","dialogVisible","addDialogVisible","form","userName","userPassword","confirmedPassword","userAccount","userPhone","userAge","userSex","userAddress","min","max","validator","validatePass2","checkDuplicate","methods","submitForm","handleManagerLogin","handleUserLogin","$message","managerLogin","then","res","status","success","localStorage","setItem","error","memberLogin","resetForm","$refs","resetFields"],"sources":["src/components/page/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-wrap\">\r\n        <div class=\"ms-login\">\r\n            <div class=\"ms-title\">企业物流中心平台</div>\r\n            <el-form :model=\"param\" :rules=\"rules\" ref=\"login\" label-width=\"0px\" class=\"ms-content\">\r\n                <el-form-item>\r\n                    <el-select v-model=\"param.role\" clearable placeholder=\"登录角色\">\r\n                    <el-option key=\"0\" label=\"manager\" value=\"manager\"></el-option>\r\n                    <el-option key=\"1\" label=\"user\" value=\"user\"></el-option>\r\n                </el-select>\r\n                </el-form-item>\r\n                <el-form-item prop=\"username\">\r\n                    <el-input v-model=\"param.id\" placeholder=\"username\">\r\n                        <el-button slot=\"prepend\" icon=\"el-icon-lx-people\"></el-button>\r\n                    </el-input>\r\n                </el-form-item>\r\n                \r\n                <el-form-item prop=\"password\">\r\n                    <el-input type=\"password\" placeholder=\"password\" v-model=\"param.password\" @keyup.enter.native=\"submitForm()\">\r\n                        <el-button slot=\"prepend\" icon=\"el-icon-lx-lock\"></el-button>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <div class=\"login-btn\">\r\n                    <el-button type=\"primary\" @click=\"submitForm()\">登录</el-button>\r\n                </div>\r\n                <div class=\"login-btn\">\r\n                    <el-button type=\"success\" @click=\"getMethod('addButton')\">注册</el-button>\r\n                </div>               \r\n            </el-form>\r\n        </div>\r\n\r\n        <!-- 增添用户表单 -->\r\n        <!-- <el-dialog\r\n          title=\"\"\r\n          :visible.sync=\"dialogVisible\"\r\n          width=\"50%\"\r\n          center>\r\n          <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"100px\">\r\n            <el-form-item label=\"用户账户\" prop=\"userAccount\">\r\n                <el-input v-model=\"form.userAccount\"></el-input>\r\n              </el-form-item>\r\n            <el-form-item label=\"用户密码\" prop=\"userPassword\" >\r\n              <el-input v-model=\"form.userPassword\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认密码\" prop=\"confirmedPassword\">\r\n              <el-input v-model=\"form.confirmedPassword\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户姓名\" prop=\"userName\">\r\n                <el-input v-model=\"form.userName\"></el-input>\r\n              </el-form-item>\r\n            <el-form-item label=\"联系电话\" prop=\"userPhone\">\r\n                <el-input v-model=\"form.userPhone\"></el-input>\r\n              </el-form-item>\r\n            <el-form-item label=\"年龄\" prop=\"userAge\">\r\n              <el-input v-model=\"form.userAge\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"性别\" prop=\"userSex\">\r\n                <el-select v-model=\"form.userSex\" placeholder=\"请选择性别\">\r\n                  <el-option label=\"男\" value=\"男\"></el-option>\r\n                  <el-option label=\"女\" value=\"女\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            <el-form-item label=\"住址\" prop=\"userAddress\">\r\n                <el-input v-model=\"form.userAddress\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n          <span slot=\"footer\" class=\"dialog-footer\" v-show=\"addDialogVisible\">\r\n            <el-button @click=\"addDialogVisible = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"getMethod('addAction')\">确定</el-button>\r\n          </span>\r\n        </el-dialog> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { userLogin } from \"@/js/login\";\r\nexport default {\r\n    data() {\r\n\r\n        return {\r\n            param: {\r\n                role: '',\r\n                id: '',\r\n                password: '',\r\n            },\r\n            rules: {\r\n                managerId: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\r\n                password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\r\n            },\r\n\r\n            dialogVisible: false,\r\n            addDialogVisible: false,\r\n\r\n            form:{\r\n                userName:'',\r\n                userPassword:'',\r\n                confirmedPassword:'',\r\n                userAccount:'',\r\n                userPhone:'',\r\n                userAge:'',\r\n                userSex:'',\r\n                userAddress:'',\r\n            },\r\n\r\n            rules: {\r\n                userName: [\r\n                    { required: true, message: '请输入用户姓名', trigger: 'blur' },\r\n                    { min: 2, max: 10, message: '长度在2至10个字符之间', trigger: 'blur' },\r\n                ],\r\n\r\n                userPassword: [\r\n                    { required: true, message: '请输入密码', trigger: 'blur' },\r\n                    { min: 6, max: 10, message: '长度在6至15个字符之间', trigger: 'blur' }\r\n                ],\r\n\r\n                confirmedPassword: [\r\n                    { validator: validatePass2, trigger: 'blur' }\r\n                ],\r\n\r\n                userAccount: [\r\n                    { required: true, message: '请输入账户', trigger: 'blur' },\r\n                    { min: 3, max: 10, message: '长度在3至10个字符之间', trigger: 'blur' },\r\n                    { validator: checkDuplicate, trigger: 'blur' }\r\n                ],\r\n\r\n                userPhone: [\r\n                    { required: true, message: '请输入电话', trigger: 'blur' },\r\n                    { min: 11, max: 11, message: '长度为11位', trigger: 'blur' },\r\n                ],\r\n\r\n                userAge: [\r\n                    { required: true, message: '请输入年龄', trigger: 'blur' },\r\n                ],\r\n\r\n                userSex:[\r\n                { required: true, message: '请选择性别', trigger: 'change' },\r\n                ],\r\n\r\n                userAddress: [\r\n                    { required: true, message: '请输入住址', trigger: 'blur' },\r\n                ],\r\n            }\r\n        };\r\n    },\r\n    methods:{\r\n        submitForm(){\r\n            if (this.param.role == \"manager\") {\r\n                this.handleManagerLogin();\r\n            }else if(this.param.role == \"user\"){\r\n                this.handleUserLogin();\r\n            }else{\r\n                this.$message('请选择角色');\r\n            }\r\n            \r\n        },\r\n        handleManagerLogin(){\r\n            managerLogin(this.param).then(res=>{\r\n                if(res.status==200) {\r\n                    if(res.data){\r\n                        this.$message.success('登录成功');\r\n                        localStorage.setItem('managerId', this.param.id);\r\n                        // this.$router.push('/index/dashboard');\r\n                    } \r\n                    else{\r\n                        this.$message.error('登录失败');\r\n                    }\r\n                }else{\r\n                    this.$message.error('服务器错误');\r\n                }\r\n            })\r\n        },\r\n        handleUserLogin(){\r\n            memberLogin(this.param).then(res=>{\r\n                if(res.status==200) {\r\n                    if(res.data){\r\n                        this.$message.success('登录成功');\r\n                        localStorage.setItem('memberId', this.param.id);\r\n                        // this.$router.push('/memberView');\r\n                    } \r\n                    else{\r\n                        this.$message.error('登录失败');\r\n                    }\r\n                }else{\r\n                    this.$message.error('服务器错误');\r\n                }\r\n            })\r\n        },\r\n\r\n\r\n        resetForm() {\r\n            this.$refs.form.resetFields();\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-wrap {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    /* background-image: url(../../assets/img/login-bg.jpg); */\r\n    background-size: 100%;\r\n}\r\n.ms-title {\r\n    width: 100%;\r\n    line-height: 50px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    color: #000000;\r\n    border-bottom: 1px solid #ddd;\r\n}\r\n.ms-login {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 350px;\r\n    margin: -190px 0 0 -175px;\r\n    border-radius: 5px;\r\n    background: rgba(255, 255, 255, 0.3);\r\n    overflow: hidden;\r\n}\r\n.ms-content {\r\n    padding: 30px 30px;\r\n}\r\n.login-btn {\r\n    text-align: center;\r\n}\r\n.login-btn button {\r\n    width: 100%;\r\n    height: 36px;\r\n    margin-bottom: 10px;\r\n}\r\n.login-tips {\r\n    font-size: 12px;\r\n    line-height: 30px;\r\n    color: #000000;\r\n}\r\n</style>"],"mappings":"AA2EA,SAAAA,SAAA;AACA;EACAC,KAAA;IAEA;MACAC,KAAA;QACAC,IAAA;QACAC,EAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAC,SAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAL,QAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MAEAC,aAAA;MACAC,gBAAA;MAEAC,IAAA;QACAC,QAAA;QACAC,YAAA;QACAC,iBAAA;QACAC,WAAA;QACAC,SAAA;QACAC,OAAA;QACAC,OAAA;QACAC,WAAA;MACA;MAEAf,KAAA;QACAQ,QAAA,GACA;UAAAN,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAY,GAAA;UAAAC,GAAA;UAAAd,OAAA;UAAAC,OAAA;QAAA,EACA;QAEAK,YAAA,GACA;UAAAP,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAY,GAAA;UAAAC,GAAA;UAAAd,OAAA;UAAAC,OAAA;QAAA,EACA;QAEAM,iBAAA,GACA;UAAAQ,SAAA,EAAAC,aAAA;UAAAf,OAAA;QAAA,EACA;QAEAO,WAAA,GACA;UAAAT,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAY,GAAA;UAAAC,GAAA;UAAAd,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAc,SAAA,EAAAE,cAAA;UAAAhB,OAAA;QAAA,EACA;QAEAQ,SAAA,GACA;UAAAV,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAY,GAAA;UAAAC,GAAA;UAAAd,OAAA;UAAAC,OAAA;QAAA,EACA;QAEAS,OAAA,GACA;UAAAX,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QAEAU,OAAA,GACA;UAAAZ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QAEAW,WAAA,GACA;UAAAb,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAiB,OAAA;IACAC,WAAA;MACA,SAAA1B,KAAA,CAAAC,IAAA;QACA,KAAA0B,kBAAA;MACA,gBAAA3B,KAAA,CAAAC,IAAA;QACA,KAAA2B,eAAA;MACA;QACA,KAAAC,QAAA;MACA;IAEA;IACAF,mBAAA;MACAG,YAAA,MAAA9B,KAAA,EAAA+B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,IAAAD,GAAA,CAAAjC,IAAA;YACA,KAAA8B,QAAA,CAAAK,OAAA;YACAC,YAAA,CAAAC,OAAA,mBAAApC,KAAA,CAAAE,EAAA;YACA;UACA,OACA;YACA,KAAA2B,QAAA,CAAAQ,KAAA;UACA;QACA;UACA,KAAAR,QAAA,CAAAQ,KAAA;QACA;MACA;IACA;IACAT,gBAAA;MACAU,WAAA,MAAAtC,KAAA,EAAA+B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,IAAAD,GAAA,CAAAjC,IAAA;YACA,KAAA8B,QAAA,CAAAK,OAAA;YACAC,YAAA,CAAAC,OAAA,kBAAApC,KAAA,CAAAE,EAAA;YACA;UACA,OACA;YACA,KAAA2B,QAAA,CAAAQ,KAAA;UACA;QACA;UACA,KAAAR,QAAA,CAAAQ,KAAA;QACA;MACA;IACA;IAGAE,UAAA;MACA,KAAAC,KAAA,CAAA7B,IAAA,CAAA8B,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}