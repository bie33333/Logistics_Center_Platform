{"ast":null,"code":"import { selectAllMovie } from \"@/api/dashboard\";\nexport default {\n  data() {\n    return {\n      visible: false,\n      cardInfo: {},\n      movieData: [],\n      page: {\n        index: 1,\n        size: 4,\n        total: 0\n      },\n      consume: {\n        cardId: \"\",\n        name: '',\n        totalPrice: 0,\n        totalIntegral: 0,\n        number: 0\n      }\n    };\n  },\n  created() {\n    this.getMovieData();\n  },\n  methods: {\n    confirm() {\n      this.visible = false;\n      this.$emit('ConsumeDialogConfirm', this.consume);\n    },\n    show(cardInfo) {\n      this.cardInfo = cardInfo;\n      this.consume.cardId = cardInfo.cardId;\n      this.visible = true;\n    },\n    getMovieData() {\n      selectAllMovie({\n        \"pageIndex\": this.page.index,\n        \"pageSize\": this.page.size\n      }).then(res => {\n        this.movieData = res.data.list;\n        this.page.total = res.data.pageTotal;\n      });\n    },\n    handlePageChange(val) {\n      this.page.index = val;\n      this.getMovieData();\n    },\n    chooseMovie(val) {\n      let movie = val;\n      this.consume.name = movie.name;\n      if (this.consume.number === 0) {\n        this.consume.number = 1;\n      }\n      this.consume.totalPrice = movie.price * this.consume.number;\n      this.consume.totalIntegral = movie.integral * this.consume.number;\n    },\n    inputNumber() {\n      this.consume.totalPrice = movie.price * this.consume.number;\n      this.consume.totalIntegral = movie.integral * this.consume.number;\n    }\n  }\n};","map":{"version":3,"names":["selectAllMovie","data","visible","cardInfo","movieData","page","index","size","total","consume","cardId","name","totalPrice","totalIntegral","number","created","getMovieData","methods","confirm","$emit","show","then","res","list","pageTotal","handlePageChange","val","chooseMovie","movie","price","integral","inputNumber"],"sources":["src/components/page/card/ConsumeDialog.vue"],"sourcesContent":["<template>\r\n    <el-dialog title=\"消费\" :visible.sync=\"visible\" width=\"70%\">\r\n        <el-table border :data=\"movieData\" @current-change=\"chooseMovie\">\r\n            <el-table-column prop=\"name\" label=\"电影名\"></el-table-column>\r\n            <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n            <el-table-column prop=\"integral\" label=\"积分\"></el-table-column>\r\n        </el-table>\r\n        <el-pagination class=\"pagination\" background layout=\"total, prev, pager, next\"\r\n            :current-page=\"page.index\" :page-size=\"page.size\" :total=\"page.total\"\r\n            @current-change=\"handlePageChange\">\r\n        </el-pagination>\r\n        <el-form :model=\"form\" label-width=\"70px\" size=\"mini\">\r\n            <el-form-item label=\"电影名字\"> {{consume.name}} </el-form-item>\r\n            <el-form-item label=\"数量\"> <el-input v-model=\"consume.number\" @change=\"inputNumber\"></el-input> </el-form-item>\r\n            <el-form-item label=\"价格\"> {{consume.totalPrice}} </el-form-item>\r\n            <el-form-item label=\"获得积分\"> {{consume.totalIntegral}} </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"visible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { selectAllMovie } from \"@/api/dashboard\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            visible: false,\r\n            cardInfo: {},\r\n            movieData: [],\r\n            page: {\r\n                index: 1,\r\n                size: 4,\r\n                total: 0,\r\n            },\r\n            consume: {\r\n                cardId: \"\",\r\n                name: '',\r\n                totalPrice: 0,\r\n                totalIntegral: 0,\r\n                number: 0,\r\n            },\r\n        }\r\n    },\r\n    created() {\r\n        this.getMovieData();\r\n    },\r\n    methods: {\r\n        confirm() {\r\n            this.visible = false;\r\n            this.$emit('ConsumeDialogConfirm',this.consume);\r\n        },\r\n        show(cardInfo) {\r\n            this.cardInfo = cardInfo;\r\n            this.consume.cardId = cardInfo.cardId;\r\n            this.visible = true;\r\n        },\r\n        getMovieData() {\r\n            selectAllMovie({\r\n                \"pageIndex\" : this.page.index,\r\n                \"pageSize\" : this.page.size\r\n            }).then(res => {\r\n                this.movieData = res.data.list;\r\n                this.page.total = res.data.pageTotal;\r\n            })\r\n        },\r\n        handlePageChange(val) {\r\n            this.page.index = val;\r\n            this.getMovieData();\r\n        },\r\n        chooseMovie(val) {\r\n            let movie = val;\r\n            this.consume.name = movie.name;\r\n            if (this.consume.number === 0) {\r\n                this.consume.number = 1;\r\n            }\r\n            this.consume.totalPrice = movie.price * this.consume.number;\r\n            this.consume.totalIntegral = movie.integral * this.consume.number;\r\n        },\r\n        inputNumber() {\r\n            this.consume.totalPrice = movie.price * this.consume.number;\r\n            this.consume.totalIntegral = movie.integral * this.consume.number;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAyBA,SAAAA,cAAA;AACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,SAAA;MACAC,IAAA;QACAC,KAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,OAAA;QACAC,MAAA;QACAC,IAAA;QACAC,UAAA;QACAC,aAAA;QACAC,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAhB,OAAA;MACA,KAAAiB,KAAA,8BAAAV,OAAA;IACA;IACAW,KAAAjB,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;MACA,KAAAM,OAAA,CAAAC,MAAA,GAAAP,QAAA,CAAAO,MAAA;MACA,KAAAR,OAAA;IACA;IACAc,aAAA;MACAhB,cAAA;QACA,kBAAAK,IAAA,CAAAC,KAAA;QACA,iBAAAD,IAAA,CAAAE;MACA,GAAAc,IAAA,CAAAC,GAAA;QACA,KAAAlB,SAAA,GAAAkB,GAAA,CAAArB,IAAA,CAAAsB,IAAA;QACA,KAAAlB,IAAA,CAAAG,KAAA,GAAAc,GAAA,CAAArB,IAAA,CAAAuB,SAAA;MACA;IACA;IACAC,iBAAAC,GAAA;MACA,KAAArB,IAAA,CAAAC,KAAA,GAAAoB,GAAA;MACA,KAAAV,YAAA;IACA;IACAW,YAAAD,GAAA;MACA,IAAAE,KAAA,GAAAF,GAAA;MACA,KAAAjB,OAAA,CAAAE,IAAA,GAAAiB,KAAA,CAAAjB,IAAA;MACA,SAAAF,OAAA,CAAAK,MAAA;QACA,KAAAL,OAAA,CAAAK,MAAA;MACA;MACA,KAAAL,OAAA,CAAAG,UAAA,GAAAgB,KAAA,CAAAC,KAAA,QAAApB,OAAA,CAAAK,MAAA;MACA,KAAAL,OAAA,CAAAI,aAAA,GAAAe,KAAA,CAAAE,QAAA,QAAArB,OAAA,CAAAK,MAAA;IACA;IACAiB,YAAA;MACA,KAAAtB,OAAA,CAAAG,UAAA,GAAAgB,KAAA,CAAAC,KAAA,QAAApB,OAAA,CAAAK,MAAA;MACA,KAAAL,OAAA,CAAAI,aAAA,GAAAe,KAAA,CAAAE,QAAA,QAAArB,OAAA,CAAAK,MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}