{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      showTags: true,\n      tagsList: []\n    };\n  },\n  methods: {\n    isActive(path) {\n      return path === this.$route.fullPath;\n    },\n    closeTags(index) {\n      const delItem = this.tagsList.splice(index, 1)[0];\n      const item = this.tagsList[index] ? this.tagsList[index] : this.tagsList[index - 1];\n      if (item) {\n        delItem.path === this.$route.fullPath && this.$router.push(item.path);\n      } else {\n        this.$router.push('/');\n      }\n    },\n    addTags(route) {\n      const isExist = this.tagsList.some(item => {\n        return item.path === route.fullPath;\n      });\n      if (!isExist) {\n        this.tagsList.push({\n          title: route.meta.title,\n          path: route.fullPath\n        });\n      }\n      console.log(this.tagsList);\n    },\n    handleTags(command) {\n      command === 'other' ? this.closeOther() : this.closeAll();\n    },\n    closeOther() {\n      const curItem = this.tagsList.filter(item => {\n        return item.path === this.$route.fullPath;\n      });\n      this.tagsList = curItem;\n    },\n    closeAll() {\n      this.tagsList = [];\n      this.$router.push('/');\n    }\n  },\n  watch: {\n    $route(newValue, oldValue) {\n      this.addTags(newValue);\n    }\n  }\n};","map":{"version":3,"names":["data","showTags","tagsList","methods","isActive","path","$route","fullPath","closeTags","index","delItem","splice","item","$router","push","addTags","route","isExist","some","title","meta","console","log","handleTags","command","closeOther","closeAll","curItem","filter","watch","newValue","oldValue"],"sources":["src/components/common/Tag.vue"],"sourcesContent":["<template>\r\n    <div class=\"tags\" v-if=\"showTags\">\r\n        <ul>\r\n            <li class=\"tags-li\" v-for=\"(item,index) in tagsList\" :class=\"{'active': isActive(item.path)}\" :key=\"item.title\">\r\n                <router-link :to=\"item.path\" class=\"tags-li-title\">\r\n                    {{ item.title }}\r\n                </router-link>\r\n                <span class=\"tags-li-icon\" @click=\"closeTags(index)\">\r\n                    <i class=\"el-icon-close\"></i>\r\n                </span>\r\n            </li>\r\n        </ul>\r\n        <div class=\"tags-close-box\">\r\n            <el-dropdown @command=\"handleTags\">\r\n                <el-button size=\"mini\" type=\"primary\">\r\n                    标签选项<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n                </el-button>\r\n                <el-dropdown-menu size=\"small\" slot=\"dropdown\">\r\n                    <el-dropdown-item command=\"other\">关闭其他</el-dropdown-item>\r\n                    <el-dropdown-item command=\"all\">关闭所有</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n            </el-dropdown>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            showTags: true,\r\n            tagsList: [],\r\n        }\r\n    },\r\n    methods: {\r\n        isActive(path) {\r\n            return path === this.$route.fullPath;\r\n        },\r\n        closeTags(index){\r\n            const delItem = this.tagsList.splice(index, 1)[0];\r\n            const item = this.tagsList[index] ? this.tagsList[index] : this.tagsList[index - 1];\r\n            if (item) {\r\n                delItem.path === this.$route.fullPath && this.$router.push(item.path);\r\n            }else{\r\n                this.$router.push('/');\r\n            }\r\n        },\r\n        addTags(route){\r\n            const isExist = this.tagsList.some(item => {\r\n                return item.path === route.fullPath;\r\n            })\r\n            if(!isExist){\r\n                this.tagsList.push({\r\n                    title: route.meta.title,\r\n                    path: route.fullPath,\r\n                })\r\n            }\r\n            console.log(this.tagsList);\r\n        },\r\n        handleTags(command){\r\n            command === 'other' ? this.closeOther() : this.closeAll();\r\n        },\r\n        closeOther(){\r\n            const curItem = this.tagsList.filter(item => {\r\n                return item.path === this.$route.fullPath;\r\n            })\r\n            this.tagsList = curItem;\r\n        },\r\n        closeAll(){\r\n                this.tagsList = [];\r\n                this.$router.push('/');\r\n            },\r\n    },\r\n    watch: {\r\n        $route(newValue, oldValue){\r\n            this.addTags(newValue);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n .tags {\r\n    position: relative;\r\n    height: 30px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    padding-right: 120px;\r\n    box-shadow: 0 5px 10px #ddd;\r\n}\r\n\r\n\r\n.tags a {\r\n    text-decoration: none\r\n}\r\n\r\n.tags ul {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.tags-li {\r\n    float: left;\r\n    margin: 3px 5px 2px 3px;\r\n    border-radius: 3px;\r\n    font-size: 12px;\r\n    overflow: hidden;\r\n    cursor: pointer;\r\n    height: 23px;\r\n    line-height: 23px;\r\n    border: 1px solid #e9eaec;\r\n    background: #fff;\r\n    padding: 0 5px 0 12px;\r\n    vertical-align: middle;\r\n    color: #666;\r\n    -webkit-transition: all .3s ease-in;\r\n    -moz-transition: all .3s ease-in;\r\n    transition: all .3s ease-in;\r\n}\r\n\r\n.tags-li:not(.active):hover {\r\n    background: #f8f8f8;\r\n}\r\n\r\n.tags-li.active {\r\n    color: #fff;\r\n}\r\n\r\n.tags-li-title {\r\n    float: left;\r\n    max-width: 80px;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    margin-right: 5px;\r\n    color: #666;\r\n}\r\n.tags-li.active {\r\n    border: 1px solid #409EFF;\r\n    background-color: #409EFF;\r\n}\r\n\r\n.tags-li.active .tags-li-title {\r\n    color: #fff;\r\n}\r\n\r\n.tags-close-box {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    box-sizing: border-box;\r\n    padding-top: 1px;\r\n    text-align: center;\r\n    width: 110px;\r\n    height: 30px;\r\n    background: #fff;\r\n    z-index: 10;\r\n}  \r\n</style>"],"mappings":";AA2BA;EACAA,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,SAAAC,IAAA;MACA,OAAAA,IAAA,UAAAC,MAAA,CAAAC,QAAA;IACA;IACAC,UAAAC,KAAA;MACA,MAAAC,OAAA,QAAAR,QAAA,CAAAS,MAAA,CAAAF,KAAA;MACA,MAAAG,IAAA,QAAAV,QAAA,CAAAO,KAAA,SAAAP,QAAA,CAAAO,KAAA,SAAAP,QAAA,CAAAO,KAAA;MACA,IAAAG,IAAA;QACAF,OAAA,CAAAL,IAAA,UAAAC,MAAA,CAAAC,QAAA,SAAAM,OAAA,CAAAC,IAAA,CAAAF,IAAA,CAAAP,IAAA;MACA;QACA,KAAAQ,OAAA,CAAAC,IAAA;MACA;IACA;IACAC,QAAAC,KAAA;MACA,MAAAC,OAAA,QAAAf,QAAA,CAAAgB,IAAA,CAAAN,IAAA;QACA,OAAAA,IAAA,CAAAP,IAAA,KAAAW,KAAA,CAAAT,QAAA;MACA;MACA,KAAAU,OAAA;QACA,KAAAf,QAAA,CAAAY,IAAA;UACAK,KAAA,EAAAH,KAAA,CAAAI,IAAA,CAAAD,KAAA;UACAd,IAAA,EAAAW,KAAA,CAAAT;QACA;MACA;MACAc,OAAA,CAAAC,GAAA,MAAApB,QAAA;IACA;IACAqB,WAAAC,OAAA;MACAA,OAAA,oBAAAC,UAAA,UAAAC,QAAA;IACA;IACAD,WAAA;MACA,MAAAE,OAAA,QAAAzB,QAAA,CAAA0B,MAAA,CAAAhB,IAAA;QACA,OAAAA,IAAA,CAAAP,IAAA,UAAAC,MAAA,CAAAC,QAAA;MACA;MACA,KAAAL,QAAA,GAAAyB,OAAA;IACA;IACAD,SAAA;MACA,KAAAxB,QAAA;MACA,KAAAW,OAAA,CAAAC,IAAA;IACA;EACA;EACAe,KAAA;IACAvB,OAAAwB,QAAA,EAAAC,QAAA;MACA,KAAAhB,OAAA,CAAAe,QAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}