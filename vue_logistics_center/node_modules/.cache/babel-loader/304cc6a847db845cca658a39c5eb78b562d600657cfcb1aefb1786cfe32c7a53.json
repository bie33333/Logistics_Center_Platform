{"ast":null,"code":"import { selectAllMember, selectMemberByCondition, registerMember, modifyMember, deleteMember, exchange } from \"@/api/member.js\";\nimport MemberDialog from './member/MemberDialog.vue';\nimport ExchangeDialog from './member/ExchangeDialog.vue';\nexport default {\n  components: {\n    MemberDialog,\n    ExchangeDialog\n  },\n  data() {\n    return {\n      condition: {\n        birthdayQuery: \"\",\n        name: \"\"\n      },\n      memberData: [],\n      page: {\n        index: 1,\n        size: 5,\n        total: 0\n      },\n      checkType: {\n        item: [\"memberId\", \"name\"],\n        disabled: true\n      },\n      modifyType: {\n        item: [\"name\", \"password\", \"sex\", \"birthday\"]\n      },\n      registerType: {\n        item: [\"name\", \"password\", \"sex\", \"birthday\"]\n      }\n    };\n  },\n  mounted() {\n    this.$refs.register.$on('memberDialogConfirm', form => {\n      registerMember(form).then(res => {\n        if (res.status == 200) {\n          this.$message.success(`添加成功`);\n          this.getMemberData();\n        } else {\n          this.$message.success(`添加失败，服务端出现问题`);\n        }\n        ;\n      });\n    });\n    this.$refs.modify.$on('memberDialogConfirm', form => {\n      modifyMember(form).then(res => {\n        if (res.status == 200) {\n          this.$message.success(`编辑成功`);\n          this.getMemberData();\n        } else {\n          this.$message.success(`编辑失败，服务端出现问题`);\n        }\n      });\n    });\n    this.$refs.exchange.$on(\"ExchangeDialogConfirm\", form => {\n      exchange(form).then(res => {\n        if (res.status == 200) {\n          this.$message.success(`兑换成功`);\n          this.getMemberData();\n        } else {\n          this.$message.success(`兑换失败，服务端出现问题`);\n        }\n      });\n    });\n  },\n  created() {\n    this.getMemberData();\n  },\n  methods: {\n    getMemberData() {\n      selectAllMember({\n        pageIndex: this.page.index,\n        pageSize: this.page.size\n      }).then(res => {\n        this.memberData = res.data.list;\n        this.page.total = res.data.pageTotal;\n      });\n    },\n    handlePageChange(val) {\n      this.page.index = val;\n      this.handleSearch();\n    },\n    checkClick(row) {\n      this.$refs.check.show(row);\n    },\n    modifyClick(row) {\n      this.$refs.modify.show(row);\n    },\n    handleRegister() {\n      this.$refs.register.show({});\n    },\n    exchangeClick(row) {\n      this.$refs.exchange.show(row);\n    },\n    handleSearch() {\n      selectMemberByCondition({\n        pageIndex: this.page.index,\n        pageSize: this.page.size,\n        name: this.condition.name,\n        birthdayType: this.condition.birthdayQuery\n      }).then(res => {\n        this.memberData = res.data.list;\n        this.page.total = res.data.pageTotal;\n      });\n    },\n    deleteClick(row) {\n      this.$confirm('确定要删除吗？', '提示', {\n        type: 'warning'\n      }).then(() => {\n        deleteMember(row).then(res => {\n          if (res.status == 200) {\n            this.$message.success('删除成功');\n            this.getMemberData();\n          } else {\n            this.$message.error(\"删除失败，服务器出现故障\");\n          }\n        });\n      }).catch(() => {});\n    }\n  }\n};","map":{"version":3,"names":["selectAllMember","selectMemberByCondition","registerMember","modifyMember","deleteMember","exchange","MemberDialog","ExchangeDialog","components","data","condition","birthdayQuery","name","memberData","page","index","size","total","checkType","item","disabled","modifyType","registerType","mounted","$refs","register","$on","form","then","res","status","$message","success","getMemberData","modify","created","methods","pageIndex","pageSize","list","pageTotal","handlePageChange","val","handleSearch","checkClick","row","check","show","modifyClick","handleRegister","exchangeClick","birthdayType","deleteClick","$confirm","type","error","catch"],"sources":["src/components/page/Member.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-card shadow=\"hover\">\r\n            <div slot=\"header\">\r\n                <div style=\"font-size: 20px; line-height: 30px\"><i class=\"el-icon-user\"></i> 会员列表</div>\r\n                <el-button type=\"primary\" class=\"handle-del mr10\" @click=\"handleRegister\">会员注册</el-button>\r\n                <el-select v-model=\"condition.birthdayQuery\" clearable placeholder=\"按生日查询\" class=\"handle-input mr10\">\r\n                    <el-option key=\"0\" label=\"当天过生日\" value=\"1\"></el-option>\r\n                    <el-option key=\"2\" label=\"七天内过生日\" value=\"7\"></el-option>\r\n                    <el-option key=\"3\" label=\"十天内过生日\" value=\"10\"></el-option>\r\n                </el-select>\r\n                <el-input v-model=\"condition.name\" clearable placeholder=\"会员名称查询\" class=\"handle-input mr10\"></el-input>\r\n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">查询</el-button>\r\n            </div>\r\n            <el-table :data=\"memberData\" border class=\"table\">\r\n                <el-table-column prop=\"memberId\" label=\"ID\" width=\"180\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"grade\" label=\"等级\" width=\"180\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"integral\" label=\"积分\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"name\" width=\"150\" label=\"会员姓名\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"sex\" label=\"性别\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"birthday\" label=\"生日\" align=\"center\"> </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"500\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" icon=\"el-icon-postcard\" @click=\"exchangeClick(scope.row)\">兑换商品</el-button>\r\n                        <el-button type=\"primary\" icon=\"el-icon-postcard\" @click=\"checkClick(scope.row)\">查看会员卡</el-button>\r\n                        <el-button type=\"warning\" icon=\"el-icon-edit\" @click=\"modifyClick(scope.row)\" >修改 </el-button>\r\n                        <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"deleteClick(scope.row)\" >删除 </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-pagination class=\"pagination\" background layout=\"total, prev, pager, next\" @current-change=\"handlePageChange\" \r\n                :current-page=\"page.index\" :page-size=\"page.size\" :total=\"page.total\">\r\n            </el-pagination>\r\n            <member-dialog title=\"注册\" :type=\"registerType\" ref=\"register\"></member-dialog>\r\n            <member-dialog title=\"确认会员信息\" :type=\"checkType\" ref=\"check\"></member-dialog>\r\n            <member-dialog title=\"修改\" :type=\"modifyType\" ref=\"modify\"></member-dialog>\r\n            <exchange-dialog ref=\"exchange\"></exchange-dialog>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { selectAllMember, selectMemberByCondition, registerMember, modifyMember, deleteMember, exchange } from \"@/api/member.js\";\r\nimport MemberDialog from './member/MemberDialog.vue';\r\nimport ExchangeDialog from './member/ExchangeDialog.vue';\r\nexport default {  \r\n    components: { MemberDialog, ExchangeDialog },\r\n    data() {\r\n        return {\r\n            condition: {\r\n                birthdayQuery: \"\",\r\n                name: \"\",\r\n            },\r\n            memberData: [],\r\n            page: {\r\n                index: 1,\r\n                size: 5,\r\n                total: 0,\r\n            },\r\n            checkType: {item: [\"memberId\",\"name\"],disabled: true,},\r\n            modifyType: {item: [\"name\",\"password\",\"sex\",\"birthday\"],},\r\n            registerType: {item: [\"name\",\"password\",\"sex\",\"birthday\"],},\r\n        }\r\n    },\r\n    mounted(){\r\n        this.$refs.register.$on('memberDialogConfirm', form => {\r\n            registerMember(form).then(res=>{\r\n                if(res.status==200) {\r\n                    this.$message.success(`添加成功`);\r\n                    this.getMemberData();\r\n                }else{\r\n                    this.$message.success(`添加失败，服务端出现问题`);\r\n                };\r\n            });\r\n        });\r\n        this.$refs.modify.$on('memberDialogConfirm', form => {\r\n            modifyMember(form).then(res=>{\r\n                if(res.status==200) {\r\n                    this.$message.success(`编辑成功`);\r\n                    this.getMemberData();\r\n                }else{\r\n                    this.$message.success(`编辑失败，服务端出现问题`);\r\n                }\r\n            });\r\n        });\r\n        this.$refs.exchange.$on(\"ExchangeDialogConfirm\", form=>{\r\n            exchange(form).then(res=>{\r\n                if(res.status==200) {\r\n                    this.$message.success(`兑换成功`);\r\n                    this.getMemberData();\r\n                }else{\r\n                    this.$message.success(`兑换失败，服务端出现问题`);\r\n                }\r\n            });\r\n        })\r\n    },\r\n    created() {\r\n        this.getMemberData();\r\n    },  \r\n    methods:{\r\n        getMemberData(){\r\n            selectAllMember({\r\n                pageIndex: this.page.index,\r\n                pageSize: this.page.size,\r\n            }).then(res => {\r\n                this.memberData = res.data.list;\r\n                this.page.total = res.data.pageTotal;\r\n            });\r\n        },\r\n        handlePageChange(val){\r\n            this.page.index = val;\r\n            this.handleSearch();\r\n        },\r\n        checkClick(row){\r\n            this.$refs.check.show(row);\r\n        },\r\n        modifyClick(row){\r\n            this.$refs.modify.show(row);\r\n        },\r\n        handleRegister() {\r\n            this.$refs.register.show({});\r\n        },\r\n        exchangeClick(row){\r\n            this.$refs.exchange.show(row);\r\n        },\r\n        handleSearch() {\r\n            selectMemberByCondition({\r\n                pageIndex: this.page.index,\r\n                pageSize: this.page.size,\r\n                name: this.condition.name,\r\n                birthdayType: this.condition.birthdayQuery,\r\n            }).then(res => {\r\n                this.memberData = res.data.list;\r\n                this.page.total = res.data.pageTotal;\r\n            });\r\n        },\r\n        deleteClick(row){\r\n            this.$confirm('确定要删除吗？', '提示', {\r\n                type: 'warning'\r\n            }).then(() => {\r\n                deleteMember(row).then(res=>{\r\n                    if(res.status==200){\r\n                        this.$message.success('删除成功');\r\n                        this.getMemberData();\r\n                    }else{\r\n                        this.$message.error(\"删除失败，服务器出现故障\")\r\n                    }\r\n                });\r\n            }).catch(() => {\r\n            });\r\n        },\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style>\r\n.handle-input {\r\n    width: 200px;\r\n    margin-left: 0px;\r\n    margin-right: 10px;\r\n    margin-top: 4px;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}